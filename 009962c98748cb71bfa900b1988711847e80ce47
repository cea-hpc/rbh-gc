{
  "comments": [
    {
      "key": {
        "uuid": "fac3c2f2_ddb4e403",
        "filename": "rbh-gc.c",
        "patchSetId": 6
      },
      "lineNbr": 120,
      "author": {
        "id": 1003556
      },
      "writtenOn": "2020-12-08T10:59:39Z",
      "side": 1,
      "message": "(nitpick) might help to print more infos on what you closed?",
      "revId": "009962c98748cb71bfa900b1988711847e80ce47",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b1d8e58f_b3d8a39d",
        "filename": "rbh-gc.c",
        "patchSetId": 6
      },
      "lineNbr": 120,
      "author": {
        "id": 1010215
      },
      "writtenOn": "2020-12-08T15:05:35Z",
      "side": 1,
      "message": "I don\u0027t have a lot to work with, do you mean the id?",
      "parentUuid": "fac3c2f2_ddb4e403",
      "revId": "009962c98748cb71bfa900b1988711847e80ce47",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fea5519a_cbc6bd36",
        "filename": "rbh-gc.c",
        "patchSetId": 6
      },
      "lineNbr": 120,
      "author": {
        "id": 1003556
      },
      "writtenOn": "2020-12-08T16:08:00Z",
      "side": 1,
      "message": "id, fd number, anything we can print should be printed in case of errors in my opinon.\nIn that case the error is very unlikely so it\u0027s probably not worth spending a lot of time improving this particular message, but I think debugging problems in rbh v4 will be sometimes quite difficult :)",
      "parentUuid": "b1d8e58f_b3d8a39d",
      "revId": "009962c98748cb71bfa900b1988711847e80ce47",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "38c6264a_7d2e08ea",
        "filename": "rbh-gc.c",
        "patchSetId": 6
      },
      "lineNbr": 120,
      "author": {
        "id": 1010215
      },
      "writtenOn": "2020-12-08T23:24:01Z",
      "side": 1,
      "message": "I agree that debugging in rbh-v4 is going to be a pain.\n\nMy current plan is to assume most errors won\u0027t ever happen.\nIf they do happen, either often, or consistently, then I will try to handle them as well as possible.\n\nRight now, I feel like I lack hindsight into which sort of errors are going to pop out, and what sort of information users/I will want/need.\n\nIn my mind, I try to compare myself to find, or ls, or du. How often do these fail with something other than \"no such file or directory\" or \"permission denied\"? And when they do, for some transient reason, like an IO error, or something like that, how much information do I need but something that tells me \"try again in a second\" or \"sorry, \u003cthis piece of hardware\u003e is likely failing, you\u0027re on your own, good luck\".\n\nAnd yet, the comparison is a little flawed, find has a debug mode that can spit out a lot of information. Most software has. I guess this is 50% me not having strong enough opinions on error handling, and how to do logging, 25% not finding convincing solutions out there, and 25% deliberately postponing the issue.",
      "parentUuid": "fea5519a_cbc6bd36",
      "revId": "009962c98748cb71bfa900b1988711847e80ce47",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dcc00006_1a8917ac",
        "filename": "rbh-gc.c",
        "patchSetId": 6
      },
      "lineNbr": 158,
      "author": {
        "id": 1003556
      },
      "writtenOn": "2020-12-08T10:59:39Z",
      "side": 1,
      "message": "other fields of deletes-\u003edelete aren\u0027t initialized, so except id and type we have uninitialized values there -- might want to memset(0)?",
      "revId": "009962c98748cb71bfa900b1988711847e80ce47",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dffc3180_49b5eeb4",
        "filename": "rbh-gc.c",
        "patchSetId": 6
      },
      "lineNbr": 158,
      "author": {
        "id": 1010215
      },
      "writtenOn": "2020-12-08T15:05:35Z",
      "side": 1,
      "message": "It is sort of a personal challenge for me to only initialize what I need.\nIt may be good for performance in some cases, but I have to admit this is not one of those cases.\n\nI rely on the undefined-behviour sanitizer (libubsan) to catch most mistakes.\nI agree it is not bullet-proof.\n\n-----\n\nTo answer the question, here it is safe to do so. For an RBH_FET_DELETE fsevent, only the `type\u0027 and `id\u0027 fields shall ever be accessed.\nAcessing any other field is undefined behaviour by design.",
      "parentUuid": "dcc00006_1a8917ac",
      "revId": "009962c98748cb71bfa900b1988711847e80ce47",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9a18a0e6_47fd0c15",
        "filename": "rbh-gc.c",
        "patchSetId": 6
      },
      "lineNbr": 158,
      "author": {
        "id": 1003556
      },
      "writtenOn": "2020-12-08T16:08:00Z",
      "side": 1,
      "message": "I\u0027m not sure I agree nowadays (except for things like very hot paths with absolutely no syscalls), but that\u0027s a matter of policy so if you\u0027re ok with that let\u0027s go with it. If tests always run with ubsan it\u0027s a good start anyway.",
      "parentUuid": "dffc3180_49b5eeb4",
      "revId": "009962c98748cb71bfa900b1988711847e80ce47",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bc34531a_a6a43a1d",
        "filename": "rbh-gc.c",
        "patchSetId": 6
      },
      "lineNbr": 158,
      "author": {
        "id": 1010215
      },
      "writtenOn": "2020-12-08T23:24:01Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "9a18a0e6_47fd0c15",
      "revId": "009962c98748cb71bfa900b1988711847e80ce47",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e041cbbd_d0ec7485",
        "filename": "rbh-gc.c",
        "patchSetId": 6
      },
      "lineNbr": 166,
      "author": {
        "id": 1003556
      },
      "writtenOn": "2020-12-08T10:59:39Z",
      "side": 1,
      "message": "(probably if we have this multiple places)",
      "revId": "009962c98748cb71bfa900b1988711847e80ce47",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "db3ca042_215ac75c",
        "filename": "rbh-gc.c",
        "patchSetId": 6
      },
      "lineNbr": 166,
      "author": {
        "id": 1010215
      },
      "writtenOn": "2020-12-08T15:05:35Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "e041cbbd_d0ec7485",
      "revId": "009962c98748cb71bfa900b1988711847e80ce47",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}